<div class="row">



  <!-- TODO Move to sepearte file & improve CSS (use position sticky, remove the margin-hacks etc....)-->
  <style>
    .var {
      margin-bottom: 50px;
    }

    .imageElement {
      margin-top: -60px;
    }

    .arrowUp {
      border-color: transparent transparent #000;
      border-style: solid;
      border-width: 30px;
      height: 0px;
      width: 0px;
      margin-left: 190px;
      height: 0px;
    }

    .selectedImage {
      border-color: #00d68f;
      border: 1px solid;
      color: #00d68f;
    }

    .variants {
      margin-top: 80px;
      width: 400px;
      z-index: 50;
    }

    .search {
      position: fixed;
      left: 0px;
      right: 0px;
      top: 89px;
      z-index: 75;
    }

    pre {
      color: white;
      font-size: 9pt;
      line-height: 100%;
      overflow-y: hidden;
    }

    #visNetwork {
      height: 100%;
      position: fixed;
      left: 0px;
      right: 10px;
      top: 200px;
      outline: none;
      width: 100%;
      z-index: 0
    }

    nb-checkbox {
      margin-bottom: 1rem;
    }

    .form-inline [fullWidth] {
      flex: 1;
    }

    .form-inline>* {
      margin: 0 1.5rem 1.5rem 0;
    }

    nb-card.inline-form-card nb-card-body {
      padding-bottom: 0;
    }

    .imageVariant {
      float: left;
      padding: 2px;
    }

    a {
      color: #00d68f;
    }

    .header-container {
      font-size: 12px;
    }

    .exampleModeHidden {
      display: none;
    }

    @media all and (max-width: 640px) {
      #visNetwork {
        display: none;
      }
    }

    .previewpic {
      width: 100%
    }

    .exampleText {
      min-height: 50px;
      margin-top: 15px;
    }
  </style>

  <div id="visNetwork" #visNetwork></div>
</div>

<div class="row" [class.exampleModeHidden]="!exampleMode">
  <div _ngcontent-ohh-c403="" class="col-md-4" style="margin-top: 100px">
    <nb-card _ngcontent-ohh-c403="" _nghost-ohh-c77="" class="size-medium">
      <nb-card-header _ngcontent-ohh-c403=""> General Information </nb-card-header>
      <nb-card-body _ngcontent-ohh-c403="">
        <h5>About</h5>
        <p _ngcontent-ohh-c403="">
          c14r is a tool that let's you visualize image hierarchies.
          You start by typing an image you would like to analyze. To open all the nodes you can click on “expand all”.
          For further information about an image, you can click on it. c14r will show you all pushes done using that tag
          and the corresponding instructions.
        </p>
        <h5>Updates</h5>
        <ul _ngcontent-bjn-c328="" class="mb-5">
          <li _ngcontent-bjn-c328="">05/02/2021 - Added Autocompletion</li>
          <li _ngcontent-bjn-c328="">05/01/2021 - Added support for MCR</li>
          <li _ngcontent-bjn-c328="">04/17/2021 - Launch</li>
        </ul>

      </nb-card-body>
    </nb-card>
  </div>
  <div _ngcontent-ohh-c403="" class="col-md-4" style="margin-top: 100px">
    <nb-card _ngcontent-ohh-c403="" _nghost-ohh-c77="" class="size-medium">
      
      <nb-card-header _ngcontent-ohh-c403=""> Example 1: debian:bullseye</nb-card-header>
      <nb-card-body _ngcontent-ohh-c403="">
          <img src="assets/images/debian-screen.png" class="previewpic"/>
          <p class="exampleText">Bullseye is the development codename for Debian 11. Watch through the graph and observe how more and more images are using and testing the new debian version!</p>
          <button type="button" nbButton status="success" [class.exampleModeHidden]="!exampleMode"
          (click)="loadExample(); ">Show me this example, please</button>
      </nb-card-body>
    </nb-card>
  </div>
  <div _ngcontent-ohh-c403="" class="col-md-4" style="margin-top: 100px">
    <nb-card _ngcontent-ohh-c403="" _nghost-ohh-c77="" class="size-medium">
      <nb-card-header _ngcontent-ohh-c403=""> Example 2: mcr.microsoft.com/dotnet/core/runtime-deps:latest</nb-card-header>
      <nb-card-body _ngcontent-ohh-c403="">
          <img src="assets/images/mcr-screen.png" class="previewpic"/>
          <p class="exampleText">A demonstration of MCR support. Not all images are supported yet.</p>
          <button type="button" nbButton status="success" [class.exampleModeHidden]="!exampleMode"
          (click)="loadExample2(); ">Show me this example, please</button>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="variants">
  <div class="row var" *ngIf="hashes.length != 0">
    <div class="col-md-12" *ngIf="detailDataTags.length != 0">
      <nb-card _nghost-pqu-c77="">
        <nb-card-header><b>Tags</b></nb-card-header>
        <nb-card-body>
          <div *ngFor="let tag of detailDataTags" class="imageVariant">
            <button (click)="viewTag(tag)" [class.appearance-outline]="tag != currentTag"
              [class.appearance-filled]="tag == currentTag" _ngcontent-fpr-c374="" nbbutton="" matripple=""
              class="status-success appearance-outline mat-ripple appearance-filled size-tiny shape-rectangle status-info ng-star-inserted nb-transition"
              aria-disabled="false" tabindex="0"> {{tag}} </button> <br />
          </div> <br style="clear:both" />
          <div *ngIf="detailDataTagsFull.length != 0 && slimMode">
            <button (click)="toggleSlimMode()" _ngcontent-fpr-c374="" nbbutton="" matripple=""
              class="status-success appearance-outline mat-ripple appearance-filled size-tiny shape-rectangle status-info ng-star-inserted nb-transition"
              aria-disabled="false" tabindex="0"> ... </button> <br />
          </div>


        </nb-card-body>
      </nb-card>
    </div>
    <div class="col-md-12">
      <nb-card _nghost-pqu-c77="">
        <nb-card-header>Variants (Pushes) </nb-card-header>
        <nb-card-body>
          <div *ngFor="let hash of hashes" class="imageVariant">
            <button (click)="viewHash(hash)" [class.appearance-outline]="hash != currentHash"
              [class.appearance-filled]="hash == currentHash" _ngcontent-fpr-c374="" nbbutton="" matripple=""
              class="status-success appearance-outline mat-ripple appearance-filled size-tiny shape-rectangle status-basic ng-star-inserted nb-transition"
              aria-disabled="false" tabindex="0"> {{formatDate(hash)}} </button> <br />
          </div>
        </nb-card-body>
      </nb-card>
    </div>
  </div>

  <div class="row imageElement" *ngFor="let img of imageTree; let first=first;">
    <div [class.arrowUp]="!first"></div>
    <div class="col-md-12">
      <nb-card _nghost-pqu-c77="" [class.selectedImage]="img[0].isRoot">
        <nb-card-header> <a target="_blank" href="{{img[0].url}}">{{img[0].image}}</a>
          ({{formatDate(img[0].last_pushed)}}) </nb-card-header>
        <nb-card-body>
          <pre>{{img[0].instructions}}</pre>
        </nb-card-body>
      </nb-card>
    </div>
  </div>
</div>

<div class="row search">
  <div class="col-md-12">
    <nb-card class="inline-form-card">
      <nb-card-body>
        <div class="form-inline" name="searchForm">
          <input #searchInput [(ngModel)]="imageName" type="text" (keyup.enter)="resetSearch(); onSearch()"
            #ctrl="ngModel" nbInput fullWidth placeholder="input image (e.g. library/ubuntu:latest" (input)="onChange()"
            [nbAutocomplete]="auto" class="input-full-width size-medium status-basic shape-rectangle nb-transition">
          <button type="button" nbButton (click)="expandAll(); ">Expand All</button>
          <button type="button" nbButton status="primary" (click)="resetSearch(); onSearch()">Inspect Image</button>

          <nb-autocomplete #auto (selectedChange)="onSelectionChange($event)">
            <nb-option *ngFor="let option of filteredOptions$ | async" [value]="option">
              {{ option }}
            </nb-option>

          </nb-autocomplete>

        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>